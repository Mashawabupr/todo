{"ast":null,"code":"import _slicedToArray from\"C:/Users/marik/Desktop/todo-1/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import{Prompt}from\"react-router-dom\";import Card from\"../UI/Card\";import LoadingSpinner from\"../UI/LoadingSpinner\";import classes from\"./TodoForm.module.css\";import{storage}from\"../../firebase\";import{ref,listAll,getDownloadURL,uploadBytes}from\"firebase/storage\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var TodoForm=function TodoForm(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),entered=_useState2[0],setEntered=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isValid=_useState4[0],setValid=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),valueAuthor=_useState6[0],setAuthor=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),valueText=_useState8[0],setText=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),valueDate=_useState10[0],setDate=_useState10[1];var _useState11=useState(true),_useState12=_slicedToArray(_useState11,2),valueFile=_useState12[0],setFile=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),fileList=_useState14[0],setList=_useState14[1];var listRef=ref(storage,\"\");function submitFormHandler(event){event.preventDefault();props.onAddQuote({author:valueAuthor,text:valueText,date:valueDate,file:fileList});}var handleClick=function handleClick(){setEntered(false);};var handleFocus=function handleFocus(){setEntered(true);};var handleAuthor=function handleAuthor(event){setAuthor(event.target.value);};var handleText=function handleText(event){setText(event.target.value);};var handleDate=function handleDate(event){setDate(event.target.value);};var handleFile=function handleFile(event){setFile(false);var fileRef=ref(storage,\"\".concat(Math.random()));uploadBytes(fileRef,event.target.files[0]);};var handleFileSubmit=function handleFileSubmit(event){setFile(true);event.preventDefault();listAll(listRef).then(function(response){response.items.forEach(function(item){getDownloadURL(item).then(function(url){setList(url);});});});};useEffect(function(){console.log(valueFile);if(valueAuthor.trim().length>0&&valueText.trim().length>0&&valueDate.trim().length>0){setValid(true);}},[valueAuthor,valueText,valueDate]);return/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(Prompt,{when:entered,message:\"Are you sure?\"}),/*#__PURE__*/_jsxs(\"form\",{className:classes.form,onSubmit:submitFormHandler,onFocus:handleFocus,children:[props.isLoading&&/*#__PURE__*/_jsx(\"div\",{className:classes.loading,children:/*#__PURE__*/_jsx(LoadingSpinner,{})}),/*#__PURE__*/_jsxs(\"div\",{className:classes.control,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"author\",children:\"Title\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"author\",value:valueAuthor,onChange:handleAuthor})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.control,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"date\",children:\"Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",id:\"date\",value:valueDate,onChange:handleDate})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.control,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"text\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"text\",rows:\"5\",value:valueText,onChange:handleText})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"file\",onChange:handleFile}),/*#__PURE__*/_jsx(\"button\",{onClick:handleFileSubmit,children:\"Add a file\"})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.actions,children:/*#__PURE__*/_jsx(\"button\",{className:isValid&&valueFile?\"btn\":\"btn invalid\",onClick:handleClick,disabled:!isValid&&!valueFile,children:\"Add ToDo\"})})]})]});};export default TodoForm;","map":{"version":3,"names":["useEffect","useState","Prompt","Card","LoadingSpinner","classes","storage","ref","listAll","getDownloadURL","uploadBytes","TodoForm","props","entered","setEntered","isValid","setValid","valueAuthor","setAuthor","valueText","setText","valueDate","setDate","valueFile","setFile","fileList","setList","listRef","submitFormHandler","event","preventDefault","onAddQuote","author","text","date","file","handleClick","handleFocus","handleAuthor","target","value","handleText","handleDate","handleFile","fileRef","Math","random","files","handleFileSubmit","then","response","items","forEach","item","url","console","log","trim","length","form","isLoading","loading","control","actions"],"sources":["C:/Users/marik/Desktop/todo-1/src/components/todos/TodoForm.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { Prompt } from \"react-router-dom\";\r\nimport Card from \"../UI/Card\";\r\nimport LoadingSpinner from \"../UI/LoadingSpinner\";\r\nimport classes from \"./TodoForm.module.css\";\r\nimport { storage } from \"../../firebase\";\r\nimport { ref, listAll, getDownloadURL, uploadBytes } from \"firebase/storage\";\r\nconst TodoForm = (props) => {\r\n  let [entered, setEntered] = useState(false);\r\n  let [isValid, setValid] = useState(false);\r\n  let [valueAuthor, setAuthor] = useState(\"\");\r\n  let [valueText, setText] = useState(\"\");\r\n  let [valueDate, setDate] = useState(\"\");\r\n  let [valueFile, setFile] = useState(true);\r\n  let [fileList, setList] = useState([]);\r\n  let listRef = ref(storage, \"\");\r\n\r\n  function submitFormHandler(event) {\r\n    event.preventDefault();\r\n\r\n    props.onAddQuote({\r\n      author: valueAuthor,\r\n      text: valueText,\r\n      date: valueDate,\r\n      file: fileList,\r\n    });\r\n  }\r\n\r\n  let handleClick = () => {\r\n    setEntered(false);\r\n  };\r\n  let handleFocus = () => {\r\n    setEntered(true);\r\n  };\r\n  let handleAuthor = (event) => {\r\n    setAuthor(event.target.value);\r\n  };\r\n  let handleText = (event) => {\r\n    setText(event.target.value);\r\n  };\r\n  let handleDate = (event) => {\r\n    setDate(event.target.value);\r\n  };\r\n  let handleFile = (event) => {\r\n    setFile(false);\r\n    let fileRef = ref(storage, `${Math.random()}`);\r\n    uploadBytes(fileRef, event.target.files[0]);\r\n  };\r\n  let handleFileSubmit = (event) => {\r\n    setFile(true);\r\n    event.preventDefault();\r\n    listAll(listRef).then((response) => {\r\n      response.items.forEach((item) => {\r\n        getDownloadURL(item).then((url) => {\r\n          setList(url);\r\n        });\r\n      });\r\n    });\r\n  };\r\n  useEffect(() => {\r\n    console.log(valueFile);\r\n    if (\r\n      valueAuthor.trim().length > 0 &&\r\n      valueText.trim().length > 0 &&\r\n      valueDate.trim().length > 0\r\n    ) {\r\n      setValid(true);\r\n    }\r\n  }, [valueAuthor, valueText, valueDate]);\r\n  return (\r\n    <Card>\r\n      <Prompt when={entered} message=\"Are you sure?\" />\r\n      <form\r\n        className={classes.form}\r\n        onSubmit={submitFormHandler}\r\n        onFocus={handleFocus}\r\n      >\r\n        {props.isLoading && (\r\n          <div className={classes.loading}>\r\n            <LoadingSpinner />\r\n          </div>\r\n        )}\r\n\r\n        <div className={classes.control}>\r\n          <label htmlFor=\"author\">Title</label>\r\n          <input\r\n            type=\"text\"\r\n            id=\"author\"\r\n            value={valueAuthor}\r\n            onChange={handleAuthor}\r\n          />\r\n        </div>\r\n\r\n        <div className={classes.control}>\r\n          <label htmlFor=\"date\">Date</label>\r\n          <input\r\n            type=\"date\"\r\n            id=\"date\"\r\n            value={valueDate}\r\n            onChange={handleDate}\r\n          />\r\n        </div>\r\n        <div className={classes.control}>\r\n          <label htmlFor=\"text\">Description</label>\r\n          <textarea\r\n            id=\"text\"\r\n            rows=\"5\"\r\n            value={valueText}\r\n            onChange={handleText}\r\n          ></textarea>\r\n        </div>\r\n\r\n        <div>\r\n          <input type=\"file\" id=\"file\" onChange={handleFile} />\r\n          <button onClick={handleFileSubmit}>Add a file</button>\r\n        </div>\r\n\r\n        <div className={classes.actions}>\r\n          <button\r\n            className={isValid && valueFile ? \"btn\" : \"btn invalid\"}\r\n            onClick={handleClick}\r\n            disabled={!isValid && !valueFile}\r\n          >\r\n            Add ToDo\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default TodoForm;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}